/* src/styles/CoreBoxInventory.css */
.cbi-wrap {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: #0d1117;
  color: #c9d1d9;
  font-size: 10px;            /* base text size */
  line-height: 1.2;
}

/* Top bar */
.cbi-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;                   /* smaller gap */
  padding: 6px 8px;           /* smaller padding */
  border-bottom: 1px solid #30363d;
}

.cbi-filters,
.cbi-meta {
  display: flex;
  gap: 6px;                   /* smaller gap */
  flex-wrap: wrap;
  align-items: center;
}

/* Inputs & selects */
.cbi-input,
.cbi-select {
  background: #0d1117;
  border: 1px solid #30363d;
  color: #c9d1d9;
  padding: 2px 6px;           /* smaller padding */
  border-radius: 4px;         /* tighter radius */
  font-size: 10px;            /* small size */
  height: 22px;               /* smaller height */
}

.cbi-input{
  width: 200px;
  height: 16px;
}

.cbi-checkbox {
  display: flex;
  align-items: center;
  gap: 4px;                   /* smaller gap */
  font-size: 10px;
}

/* Buttons */
.cbi-btn {
  background: #161b22;
  color: #c9d1d9;
  border: 1px solid #30363d;
  border-radius: 4px;         /* tighter radius */
  padding: 2px 6px;           /* smaller padding */
  height: 22px;               /* smaller height */
  font-size: 10px;
  cursor: pointer;
}
.cbi-btn:hover { border-color: #58a6ff; }
.cbi-btn-ghost { background: transparent; }

/* Table */
.cbi-table-wrap {
  flex: 1;
  overflow: auto;
}

.cbi-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 10px;            /* table body text */
}

.cbi-th {
  position: sticky;
  top: 0;
  background: #0d1117;
  border-bottom: 1px solid #30363d;
  text-align: left;
  padding: 6px;               /* smaller padding */
  cursor: pointer;
  white-space: nowrap;
  font-size: 10px;            /* largest allowed */
}

.cbi-table td {
  border-bottom: 1px solid #161b22;
  padding: 6px;               /* smaller padding */
  vertical-align: top;
  max-width: 340px;           /* a bit tighter */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Mono cells */
.cbi-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

.cbi-expired { color: #ff9b9b; }

.cbi-empty {
  text-align: center;
  padding: 12px;              /* smaller padding */
  color: #8b949e;
  font-size: 10px;
}

/* Pager */
.cbi-pager {
  display: flex;
  align-items: center;
  gap: 6px;
  justify-content: center;
  padding: 6px 0 8px;         /* smaller padding */
  border-top: 1px solid #30363d;
}

.cbi-page { font-size: 10px; }

/* Badges */
.cbi-badge {
  padding: 1px 5px;           /* smaller padding */
  border-radius: 999px;
  font-size: 10px;            /* small size */
  border: 1px solid transparent;
}
.cbi-badge-ok { background: #132a13; border-color: #1f6f1f; color: #9fd39f; }
.cbi-badge-danger { background: #2a1212; border-color: #7a2e2e; color: #ffb3b3; }
.cbi-badge-neutral { background: #161b22; border-color: #30363d; color: #c9d1d9; }
/* Inline new row */
.cbi-newrow {
  display: grid;
  grid-template-columns: repeat(10, minmax(90px, 1fr)) auto auto;
  gap: 6px;
  padding: 6px 8px;
  border-bottom: 1px solid #30363d;
  background: #0f131a;
}

.cbi-input-inline,
.cbi-select-inline {
  height: 20px;
  font-size: 10px;
  padding: 2px 6px;
}

.cbi-actions {
  white-space: nowrap;
}

/* tiny icon buttons */
.cbi-iconbtn {
  background: #161b22;
  border: 1px solid #30363d;
  color: #c9d1d9;
  font-size: 10px;
  padding: 0 6px;
  height: 20px;
  border-radius: 4px;
  margin-right: 4px;
  cursor: pointer;
}
.cbi-iconbtn:hover { border-color: #58a6ff; }
.cbi-iconbtn.danger { color: #ffb3b3; border-color: #7a2e2e; }
.cbi-iconbtn:disabled { opacity: .6; cursor: not-allowed; }

/* modal */
.cbi-modal {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.5);
  display: grid; place-items: center;
  z-index: 1000;
}
.cbi-modal-card {
  background: #0d1117;
  border: 1px solid #30363d;
  border-radius: 6px;
  width: 420px; max-width: 95vw;
  padding: 8px;
  font-size: 10px;
}
.cbi-modal-title {
  font-weight: 700;
  margin-bottom: 6px;
}
.cbi-modal-body { color: #c9d1d9; }
.cbi-modal-note { color: #8b949e; margin-top: 6px; }
.cbi-modal-actions {
  display: flex; justify-content: flex-end; gap: 6px; margin-top: 10px;
}
.cbi-btn.danger {
  border-color: #7a2e2e;
  color: #ffb3b3;
}

/* toast */
.cbi-toast {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 12px;
  background: #161b22;
  border: 1px solid #30363d;
  border-radius: 6px;
  padding: 6px 10px;
  display: flex; gap: 8px; align-items: center;
  font-size: 10px;
  z-index: 999;
}

/* history drawer */
.cbi-history {
  position: fixed;
  right: 0; top: 0; bottom: 0;
  width: 340px; max-width: 90vw;
  background: #0d1117;
  border-left: 1px solid #30363d;
  padding: 8px;
  overflow: auto;
  z-index: 900;
  font-size: 10px;
}
.cbi-history-head {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 8px;
}
.cbi-history-title { font-weight: 700; }
.cbi-history-list { display: grid; gap: 6px; }
.cbi-history-item {
  border: 1px solid #30363d;
  border-radius: 6px;
  padding: 6px;
  background: #0f131a;
  display: flex; align-items: center; justify-content: space-between;
}
.cbi-history-meta { display: flex; gap: 6px; align-items: center; }


/* === EDITING ROW STABILITY & ALIGNMENT === */

/* Prevent column jitter */
.cbi-table {
  table-layout: fixed; /* keeps column widths stable while editing */
}

/* While editing, let controls breathe inside the row */
tr.cbi-editing td {
  overflow: visible;        /* allow dropdowns/calendar to overflow cell */
  white-space: normal;      /* long text won't force super-wide cells */
  background: #10151b;      /* subtle tone so edit row stands out */
}

/* Inputs/selects inside cells fill the cell cleanly */
.cbi-input-inline,
.cbi-select-inline {
  width: 100%;
  box-sizing: border-box;
  min-width: 0;             /* avoid overflow from intrinsic width */
}

/* Date inputs can get cramped; ensure minimum tap target */
.cbi-input-inline[type="date"] {
  min-width: 140px;
}

/* Keep the action buttons tidy when editing or not */
.cbi-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  white-space: nowrap;
}

/* Make the inline icon buttons line up better in tight rows */
.cbi-iconbtn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* === HISTORY DRAWER UX: BACKDROP + CLOSE BUTTON === */

/* Dim background when drawer is open (click to close) */
.cbi-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 890; /* below the drawer (900) and modal (1000) */
}

/* Keep drawer header sticky so Close/Refresh stay visible */
.cbi-history-head {
  position: sticky;
  top: 0;
  background: #0d1117;
  padding-bottom: 6px;
  z-index: 1;
}

/* Close button visual (reuses your button tokens) */
.cbi-history-close {
  background: #161b22;
  color: #c9d1d9;
  border: 1px solid #30363d;
  border-radius: 4px;
  padding: 2px 6px;
  height: 22px;
  font-size: 10px;
  cursor: pointer;
}
.cbi-history-close:hover { border-color: #58a6ff; }

/* Optional: when drawer is open, keep main scrollbars from hiding under it */
.cbi-wrap.drawer-open .cbi-table-wrap {
  padding-right: 340px; /* same as drawer width */
}


/* === EDITING ROW: no jitter, inputs fill cell, date pickers visible === */
.cbi-table { table-layout: fixed; }  /* stable column widths */

tr.cbi-editing td {
  overflow: visible;         /* show dropdowns/calendars */
  white-space: normal;       /* long text wraps while editing */
  background: #10151b;       /* subtle highlight for edit row */
}

.cbi-input-inline,
.cbi-select-inline {
  width: 100%;
  box-sizing: border-box;
  min-width: 0;
}

.cbi-input-inline[type="date"] { min-width: 140px; }

.cbi-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  white-space: nowrap;
}

.cbi-iconbtn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* === HISTORY DRAWER: respect sidebar & easy closing === */

/* Backdrop should NOT cover the sidebar; start after it */
.cbi-backdrop {
  position: fixed;
  top: 0;
  left: var(--sidebar-w);      /* <- key line */
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,.45);
  z-index: 890;                /* below drawer (900), modal (1000) */
}

/* Drawer width adapts to remaining viewport (with sidebar) */
.cbi-history {
  width: min(340px, calc(100vw - var(--sidebar-w)));
}

/* When drawer open, keep main content from hiding under it */
.cbi-wrap.drawer-open .cbi-table-wrap {
  padding-right: min(340px, calc(100vw - var(--sidebar-w)));
}

/* Keep drawer header controls (Refresh/Close) visible while scrolling */
.cbi-history-head {
  position: sticky;
  top: 0;
  background: #0d1117;
  padding-bottom: 6px;
  z-index: 1;
}

.cbi-history-close {
  background: #161b22;
  color: #c9d1d9;
  border: 1px solid #30363d;
  border-radius: 4px;
  padding: 2px 6px;
  height: 22px;
  font-size: 10px;
  cursor: pointer;
}
.cbi-history-close:hover { border-color: #58a6ff; }


/* === EDITING ROW: no jitter, inputs fill cell, date pickers visible === */
.cbi-table { table-layout: fixed; }  /* stable column widths */

tr.cbi-editing td {
  overflow: visible;         /* show dropdowns/calendars */
  white-space: normal;       /* long text wraps while editing */
  background: #10151b;       /* subtle highlight for edit row */
}

.cbi-input-inline,
.cbi-select-inline {
  width: 100%;
  box-sizing: border-box;
  min-width: 0;
}

.cbi-input-inline[type="date"] { min-width: 140px; }

.cbi-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  white-space: nowrap;
}

.cbi-iconbtn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* === HISTORY DRAWER: respect sidebar & easy closing === */

/* Backdrop should NOT cover the sidebar; start after it */
.cbi-backdrop {
  position: fixed;
  top: 0;
  left: var(--sidebar-w);      /* <- key line */
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,.45);
  z-index: 890;                /* below drawer (900), modal (1000) */
}

/* Drawer width adapts to remaining viewport (with sidebar) */
.cbi-history {
  width: min(340px, calc(100vw - var(--sidebar-w)));
}

/* When drawer open, keep main content from hiding under it */
.cbi-wrap.drawer-open .cbi-table-wrap {
  padding-right: min(340px, calc(100vw - var(--sidebar-w)));
}

/* Keep drawer header controls (Refresh/Close) visible while scrolling */
.cbi-history-head {
  position: sticky;
  top: 0;
  background: #0d1117;
  padding-bottom: 6px;
  z-index: 1;
}

.cbi-history-close {
  background: #161b22;
  color: #c9d1d9;
  border: 1px solid #30363d;
  border-radius: 4px;
  padding: 2px 6px;
  height: 22px;
  font-size: 10px;
  cursor: pointer;
}
.cbi-history-close:hover { border-color: #58a6ff; }


/* === Dense table spacing (compact) === */
.cbi-th {
  padding: 4px 6px;          /* was 6px */
}

.cbi-table td {
  padding: 4px 6px;          /* was 6px */
  line-height: 1.1;          /* a touch tighter */
}

/* Inline editors inside cells */
.cbi-input-inline,
.cbi-select-inline {
  height: 18px;              /* was 20px */
  padding: 1px 4px;          /* was 2px 6px */
}

.cbi-input-inline[type="date"] {
  min-width: 120px;          /* was 140px to save space */
}

/* Action buttons inside the table */
.cbi-actions {
  gap: 2px;                  /* was 4px */
}

.cbi-iconbtn {
  height: 18px;              /* was 20px */
  padding: 0 4px;            /* was 0 6px */
  margin-right: 2px;         /* was 4px */
}

/* Badges inside cells */
.cbi-badge {
  padding: 0 4px;            /* was 1px 5px */
}
